<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Cumulus Reference</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.1 (build 858)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="index.html">Cumulus </a></h1>
				<a id="developerHome" href="index.html">Fivesquare Software</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">Cumulus Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">Cumulus Reference</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
						
						
						<h2>About</h2>

<p><a href="Classes/Cumulus.html">Cumulus</a> for Objective C is inspired by Ruby&rsquo;s <a href="https://github.com/archiloque/rest-client">rest-client</a>, and shares the goal of providing a simple, low-level interface to REST services through methods that mirror the HTTP requests associated with creating, fetching, updating, and deleting a resource.</p>

<h4>Plays Well With Others</h4>

<p>It was designed to do one thing only, and one thing well: interact with REST resources and encode/decode the data coming across the wire to/from native, generic types. Because of this, you can drop <a href="Classes/Cumulus.html">Cumulus</a> in to any system and it can fill this role without requiring a whole lot of changes to your existing code. It does not provide any kind of caching or persistence layer, no higher-level interface to resources and no UI, but it&rsquo;s so interoperable (via the ubiquitous use of blocks) that you can connect it to these services in a few minutes; in this context, blocks are used much as you would use UNIX pipes to connect different tools.</p>

<h4>Lives in the Moment</h4>

<p><a href="Classes/Cumulus.html">Cumulus</a> was also designed to be a joy to use. The primary interfaces are all implemented with blocks, so you can just forget about writing a thousand implementations of a delegate protocol or adding pointers to everything everywhereâ€”define your intentions in a block, where you intend them, and enjoy the rest of your day. All the blocks used in the public interface are typed, so you can define them once and reuse them if you find that convenient.</p>

<h4>Easy On The I&rsquo;s</h4>

<p>Configuring <a href="Classes/Cumulus.html">Cumulus</a> is, well, you don&rsquo;t configure <a href="Classes/Cumulus.html">Cumulus</a>. You simply set up a base resource for each service you wish to use and nested resources will automatically inherit the information from their parents. You don&rsquo;t need to configure anything to create those nested resources either. By passing in an object or format string and arguments to any resource, you can create a child resource ready to go. If you need to, you can override any inherited setting in a child resource.</p>

<h4>Willing to Try New Things</h4>

<p><a href="Classes/Cumulus.html">Cumulus</a> handles the most common cases for you, but provides well defined interfaces to easily extend its functionality if you need to. There are protocols for authentication that will allow you to plug in to any kind of auth system, and for mime-type handling, to let you serialize/deserialize resources to and from any kind of encoding.</p>

<h4>Seeking An OS For Long Walks On The Beach</h4>

<p><a href="Classes/Cumulus.html">Cumulus</a> was implemented with automatic reference counting (ARC) and uses weak references, as well as new NSURLConnection APIs, so it requires iOS 5 and/or Mac OS 10.7.</p>

<h2>Including in Your Project</h2>

<p>The simplest way to use <a href="Classes/Cumulus.html">Cumulus</a> in your Xcode project is to just copy the files in &ldquo;Source&rdquo; to your own project.</p>

<p>The best way to include <a href="Classes/Cumulus.html">Cumulus</a> is to drag the project into your workspace, then add either lib<a href="Classes/Cumulus.html">Cumulus</a>.a (iOS) or <a href="Classes/Cumulus.html">Cumulus</a>.framework (Mac OS) to your main target&rsquo;s link phase.</p>

<p>If you are using the Mac OS framework, the headers are automatically in your header search path. To add them for iOS, add &ldquo;${SRCROOT}/relative/path/to/Cumulus/Source&rdquo; to your HEADER_SEARCH_PATHS build setting and check the recursive box.</p>

<p>On Mac OS, import <a href="Classes/Cumulus.html">Cumulus</a> like this in your source:</p>

<p>```objective-c</p>

<h1>import &lt;Cumulus/<a href="Classes/Cumulus.html">Cumulus</a>.h></h1>

<pre><code>
On iOS, use:  

```objective-c   
#import "Cumulus.h"  
</code></pre>

<p>If you plan on running the tests, make sure you use <code>git clone --recursive</code> to get the repository (or if you are adding <a href="Classes/Cumulus.html">Cumulus</a> as a submodule, <code>git submodule update --recursive</code>) to be sure to fetch Cumulus&rsquo;s own externals.</p>

<p>Make sure you link the Security framework (to handle certificate based auth) and MobileCoreServices framework (for iOS), or CoreServices framework (for Mac OS).</p>

<p>You must use the -ObjC linker flag (at least, you could also use -force_load=<a href="Classes/Cumulus.html">Cumulus</a> or -all_load if you wanted to be more agressive) in order to link in the categories defined in Cumulus.</p>

<p>That&rsquo;s it. There is detailed help in the <a href="[https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/faq.md](https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/faq.md)" title="FAQs">FAQ</a> if you need more information about how to set up your workspace.</p>

<h2>Links</h2>

<p><a href="[https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/howto.md](https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/howto.md)" title="How Tos">How Tos</a>  <br/>
<a href="[https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/faq.md](https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/faq.md)" title="FAQs">FAQs</a>  <br/>
<a href="[https://github.com/FivesquareSoftware/Cumulus/tree/master/Examples](https://github.com/FivesquareSoftware/Cumulus/tree/master/Examples)" title="See Example Apps">Example Apps</a>  <br/>
<a href="[https://github.com/FivesquareSoftware/Cumulus/tree/master/Tests](https://github.com/FivesquareSoftware/Cumulus/tree/master/Tests)#readme" title="Running the Tests">Running the Tests</a></p>

<h2>Basic Usage</h2>

<p>The most common way to use <a href="Classes/Cumulus.html">Cumulus</a> is to set up a base resource and some children, define a couple blocks and start making requests.</p>

<h4>Set up a base resource</h4>

<p><code>objective-c   
CMResource *site = [CMResource withURL:@"http://example.com"]http://example.com"];  
site.timeout = 20;  
[site setValue:@"foo" forHeaderField:@"X-MyCustomHeader"];  
site.contentType = CMContentTypeJSON;  
site.username = @"foo";  
site.password = @"bar";  
</code><br/>
Usually, you would store this somewhere you could access from anywhere in your app, like your app delegate or a singleton.</p>

<h4>Configure some child resources and start using them</h4>

<p><em>Get stuff</em></p>

<p>```objective-c  <br/>
<a href="Classes/CMResource.html">CMResource</a> <em>posts = [site resource:@&ldquo;posts&rdquo;];<br/>
[posts getWithCompletionBlock:^(<a href="Classes/CMResponse.html">CMResponse</a> </em>response) {<br/>
    postsController.posts = response.result;<br/>
}];</p>

<p>[posts getWithCompletionBlock:^(<a href="Classes/CMResponse.html">CMResponse</a> *response) {<br/>
    recentPostsController.posts = response.result;<br/>
} query:[NSDictionary dictionaryWithObject:@&ldquo;today&rdquo; forKey:@&ldquo;postDate&rdquo;]];<br/>
```</p>

<p><em>Create stuff</em></p>

<p>```objective-c  <br/>
CMProgressBlock postProgressBlock = ^(NSDictionary *progressInfo) {<br/>
    postProgressView.progress = [[progressInfo objectForKey:kCumulusProgressInfoKeyProgress] floatValue];<br/>
};</p>

<p>NSDictionary <em>postData = &hellip;;<br/>
<a href="Classes/CMResource.html">CMResource</a> </em>firstPost = [posts resource:[NSNumber numberWithInt:1]];<br/>
[firstPost post:postData withProgressBlock:postProgressBlock completionBlock:^(<a href="Classes/CMResponse.html">CMResponse</a> *response) {<br/>
    if (response.success) {<br/>
        [postsController addPost:postData];<br/>
    }<br/>
}];<br/>
```</p>

<p><em>Map stuff</em></p>

<p><code>objective-c    
CMResource *user123 = [site resourceWithFormat:@"users/%@",[NSNumber numberWithInt:123]];  
__block MyUserClass *user;  
[user123 getWithCompletionBlock:^(CMResponse *response) {  
    if (response.success) {  
        user = [MyUserClass withUserData:response.result];  
    }  
}];  
</code></p>

<p><em>Protect stuff</em></p>

<p><code>objective-c    
CMResource *admin = [site resource:@"admin"];  
admin.preflightBlock = ^(CMRequest * request){  
    if (NO == [accountController isAuthorized:request]) {  
        NSDictionary *userInfo = [NSDictionary dictionaryWithObject:@"You need to log in to see this" forKey:NSLocalizedDescriptionKey];  
        [errorReporter report:[NSError errorWithDomain:@"MyDomain" code:-1 userInfo:userInfo]];  
        return NO;  
    }  
    return YES;  
};  
</code></p>

<p><em>Download stuff directly to disk</em></p>

<p><code>objective-c    
CMResource *images = [site resource:@"images"];  
[images downloadWithProgressBlock:nil completionBlock:^(CMResponse *response) {  
    NSURL *downloadedFile = [response.result valueForKey:kCumulusProgressInfoKeyTempFileURL];  
    // Move the file to where you want it  
}  
</code></p>

<p><em>Test stuff even before your services are ready</em></p>

<p><code>objective-c    
CMResource *posts = [site resource:@"posts"];  
posts.contentType = CMContentTypeJSON;  
[posts setFixture:[NSArray arrayWithObjects:postOne,postTwo,nil] forHTTPMethod:kCumulusHTTPMethodGET];  
[posts getWithCompletionBlock:^(CMResponse *response) {  
    postsController.posts = response.result;  
}];  
// the array from the fixture is turned into data and decoded &amp; postprocessed normally into response.result  
// You can even set your fixtures all in one place, or load them from a plist:  
[Cumulus loadFixturesNamed:@"MyService"];  
[Cumulus useFixtures:YES];  
// now all resources will also check in with Cumulus to see if they have a fixture, yay!  
</code></p>

<p><a href="Classes/Cumulus.html">Cumulus</a> does even more, like direct from disk uploads, OAuth2 authentication, automatic queueing and cancelling of requests, and post-processing on a background thread (great for Core Data mapping in a child context), See more detailed examples in  the <a href="[https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/howto.md](https://github.com/FivesquareSoftware/Cumulus/blob/master/Docs/howto.md)" title="How Tos">How Tos</a>.</p>

<h2>Contributors</h2>

<p>John Clayton <a href="&#109;&#97;&#x69;&#x6c;&#x74;&#111;&#x3a;&#x43;&#x75;&#109;&#x75;&#x6c;&#x75;&#115;&#x40;&#102;&#105;&#118;&#x65;&#115;&#x71;&#x75;&#x61;&#x72;&#x65;&#115;&#x6f;&#102;&#x74;&#119;&#97;&#114;&#101;&#x2e;&#x63;&#x6f;&#109;">&#67;&#117;&#x6d;&#x75;&#x6c;&#x75;&#115;&#64;&#102;&#x69;&#118;&#101;&#115;&#113;&#x75;&#x61;&#114;&#101;&#115;&#111;&#102;&#x74;&#x77;&#97;&#x72;&#x65;&#46;&#99;&#111;&#x6d;</a></p>

<p>Patches are welcome, pull requests make us all excited.</p>
						
						
					</div>
					
                        
                    
					
					
					<div class="index-column">
						<h2 class="index-title">Class References</h2>
						<ul>
							
							<li><a href="Classes/CMAmazonCredentials.html">CMAmazonCredentials</a></li>
							
							<li><a href="Classes/CMBasicAuthProvider.html">CMBasicAuthProvider</a></li>
							
							<li><a href="Classes/CMClientCertificateAuthProvider.html">CMClientCertificateAuthProvider</a></li>
							
							<li><a href="Classes/CMCoder.html">CMCoder</a></li>
							
							<li><a href="Classes/CMDownloadRequest.html">CMDownloadRequest</a></li>
							
							<li><a href="Classes/CMFixtureDownloadRequest.html">CMFixtureDownloadRequest</a></li>
							
							<li><a href="Classes/CMFixtureHTTPResponse.html">CMFixtureHTTPResponse</a></li>
							
							<li><a href="Classes/CMFixtureRequest.html">CMFixtureRequest</a></li>
							
							<li><a href="Classes/CMIdentityCoder.html">CMIdentityCoder</a></li>
							
							<li><a href="Classes/CMImageCoder.html">CMImageCoder</a></li>
							
							<li><a href="Classes/CMJSONCoder.html">CMJSONCoder</a></li>
							
							<li><a href="Classes/CMOAuth2AuthProvider.html">CMOAuth2AuthProvider</a></li>
							
							<li><a href="Classes/CMOAuthToken.html">CMOAuthToken</a></li>
							
							<li><a href="Classes/CMProgressInfo.html">CMProgressInfo</a></li>
							
							<li><a href="Classes/CMRequest.html">CMRequest</a></li>
							
							<li><a href="Classes/CMResource.html">CMResource</a></li>
							
							<li><a href="Classes/CMResourceGroup.html">CMResourceGroup</a></li>
							
							<li><a href="Classes/CMResponse.html">CMResponse</a></li>
							
							<li><a href="Classes/CMS3AuthProvider.html">CMS3AuthProvider</a></li>
							
							<li><a href="Classes/CMServerTrustAuthProvider.html">CMServerTrustAuthProvider</a></li>
							
							<li><a href="Classes/CMTextCoder.html">CMTextCoder</a></li>
							
							<li><a href="Classes/CMUploadRequest.html">CMUploadRequest</a></li>
							
							<li><a href="Classes/CMXMLCoder.html">CMXMLCoder</a></li>
							
							<li><a href="Classes/Cumulus.html">Cumulus</a></li>
							
						</ul>
					</div>
					
					
						
					<div class="index-column">
						
						<h2 class="index-title">Protocol References</h2>
						<ul>
							
							<li><a href="Protocols/CMAmazonCredentials.html">CMAmazonCredentials</a></li>
							
							<li><a href="Protocols/CMAuthProvider.html">CMAuthProvider</a></li>
							
							<li><a href="Protocols/CMCoder.html">CMCoder</a></li>
							
							<li><a href="Protocols/CMDownloadRequest.html">CMDownloadRequest</a></li>
							
						</ul>
						
						
						<h2 class="index-title">Category References</h2>
						<ul>
							
							<li><a href="Categories/NSData+Base64.html">NSData(Base64)</a></li>
							
							<li><a href="Categories/NSDictionary+Cumulus.html">NSDictionary(Cumulus)</a></li>
							
							<li><a href="Categories/NSObject+Cumulus.html">NSObject(Cumulus)</a></li>
							
							<li><a href="Categories/NSString+Cumulus.html">NSString(Cumulus)</a></li>
							
						</ul>
						
					</div>
					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Fivesquare Software. All rights reserved. (Last updated: 2013-04-12)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.1 (build 858)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>